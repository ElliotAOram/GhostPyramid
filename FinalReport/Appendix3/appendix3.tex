\chapter{Code Examples}

\section{phrase\_ready API}

The Charades Game API function that displays if the phrase is currently in a guessable state within the system. The function is from the charades\/charades\/views.py and is discussed in Chapter 3: Iteration 7.

\begin{verbatim}
def phrase_ready_api(request):
    """
    Asserts if the phrase is ready. Only intended for api access
    """
    phrase_ready = False
    if GAME is not None:
        if GAME.actor is not None:
            phrase_ready = GAME.actor.phrase_ready()
    return render(request, 'phrase_ready.html', {'phrase_ready' : phrase_ready})
\end{verbatim}


\section{Polling function}

The JavaScript and JQuery function used to retrieve data from the guess\_correct API. The function is from the file charades\/templates\/guess.html and discussed in Chapter 3: Iteration 7.

\begin{verbatim}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script>
setInterval(function(){
    $.get( "/api/guess_correct", function( data ) {
        if (data.includes("Word") || data.includes("Phrase")) {
            <!--http://stackoverflow.com/questions/3846935/how-to-change-page-from-within-javascript-->
            window.location.replace('/waiting_for_actor/');
        }
    });
    poll();
}, 1000);
</script>
\end{verbatim}